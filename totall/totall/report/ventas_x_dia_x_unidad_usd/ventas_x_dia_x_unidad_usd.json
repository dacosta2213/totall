{
 "add_total_row": 0,
 "columns": [],
 "creation": "2019-11-28 13:02:22.330480",
 "disable_prepared_report": 0,
 "disabled": 0,
 "docstatus": 0,
 "doctype": "Report",
 "filters": [],
 "idx": 0,
 "is_standard": "Yes",
 "letter_head": "BYPARSA",
 "modified": "2021-11-16 12:09:44.500173",
 "modified_by": "Administrator",
 "module": "Totall",
 "name": "Ventas x Dia x Unidad USD",
 "owner": "Administrator",
 "prepared_report": 0,
 "query": "select\r\nd.posting_date as \"Fecha\",\r\nd.customer as \"Cliente:Link/Customer:120\",\r\nb.parent as \"Docto:Link/Sales Invoice:120\",\r\nIFNULL(b.item_code, 'TOTAL') as \"Clave:Link/Item:120\",\r\nSUM(b.qty) as \"Cantidad:Float:140\", \r\nSUM(b.amount) as \"Importe Ventas\", \r\nSUM(@ImporteCosto := (case when d.currency = 'USD' then b.last_purchase_rate / d.conversion_rate else b.last_purchase_rate end)*(b.qty)) as \"Importe Costo:Float:140\",\r\nSUM(@Utilidad := (b.amount)-(@ImporteCosto)) AS \"Utilidad:Float:140\",\r\nAVG(@Porcentaje := TRUNCATE ((@Utilidad * 100 /(b.amount)/ 1), 0)) AS \"Porcentaje:Float:140\",\r\nd.currency as \"Moneda\",\r\nd.agente as \"Vendedor\",\r\ne.operador as \"Vendedor2\",\r\ne.telemarketing as \"Telemarketing\",\r\ne.operador1 as \"Operador\"\r\n\r\nfrom\r\n`tabSales Invoice Item` b left join\r\n`tabItem` c on b.item_code = c.item_code left join\r\n`tabSales Invoice` d on b.parent = d.name left join\r\n`tabvariables` e on d.name = e.parent\r\nwhere d.posting_date >= %(d.from_date)s and d.posting_date <= %(d.to_date)s and d.docstatus = '1' and d.customer != 'CHARROS' and d.currency = 'USD' and b.parent not like '%%DEVO%%'\r\nGROUP BY b.parent desc, b.item_code WITH ROLLUP",
 "ref_doctype": "Sales Invoice",
 "report_name": "Ventas x Dia x Unidad USD",
 "report_type": "Query Report",
 "roles": [
  {
   "role": "Accounts Manager"
  },
  {
   "role": "Accounts User"
  },
  {
   "role": "Facturacion"
  }
 ]
}