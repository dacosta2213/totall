{
 "add_total_row": 0,
 "columns": [],
 "creation": "2019-11-18 14:03:35.527008",
 "disable_prepared_report": 0,
 "disabled": 0,
 "docstatus": 0,
 "doctype": "Report",
 "filters": [],
 "idx": 0,
 "is_standard": "Yes",
 "letter_head": "Sura",
 "modified": "2021-11-16 12:07:05.787712",
 "modified_by": "Administrator",
 "module": "Totall",
 "name": "Ventas x Dia x Unidad",
 "owner": "Administrator",
 "prepared_report": 0,
 "query": "select\r\nd.posting_date as \"Fecha\",\r\nd.customer as \"Cliente:Link/Customer:120\",\r\nb.parent as \"Docto:Link/Sales Invoice:120\",\r\nIFNULL(b.item_code, 'TOTAL') as \"Clave:Link/Item:120\",\r\nSUM(b.qty) as \"Cantidad:Float:140\",\r\nSUM(case when b.parent LIKE '%%TICKET%%' then b.amount / 1.16 else b.amount end) as \"Importe Ventas:Currency:150\", \r\nSUM(@ImporteCosto := (b.last_purchase_rate)*(b.qty)) as \"Importe Costo:Currency:140\",\r\nSUM(@Utilidad := (b.amount)-(@ImporteCosto)) AS \"Utilidad:Currency:140\",\r\nAVG(@Porcentaje := TRUNCATE ((@Utilidad * 100 /(b.amount)/ 1), 0)) AS \"Porcentaje:Float:140\",\r\nd.currency as \"Moneda\",\r\nd.agente as \"Vendedor\",\r\ne.operador as \"Operador\",\r\ne.telemarketing as \"Telemarketing\",\r\nr.ruta as \"Ruta\"\r\nfrom\r\n`tabSales Invoice Item` b left join\r\n`tabItem` c on b.item_code = c.item_code left join\r\n`tabSales Invoice` d on b.parent = d.name left join\r\n`tabvariables` e on d.name = e.parent left join \r\n`tabCustomer` r ON  d.customer = r.name\r\nwhere d.posting_date >= %(d.from_date)s and d.posting_date <= %(d.to_date)s and d.docstatus = '1' and d.currency = 'MXN' and d.customer != 'CHARROS'\r\nGROUP BY b.parent desc, b.item_code WITH ROLLUP",
 "ref_doctype": "Sales Invoice",
 "report_name": "Ventas x Dia x Unidad",
 "report_type": "Query Report",
 "roles": [
  {
   "role": "Accounts Manager"
  },
  {
   "role": "Accounts User"
  },
  {
   "role": "Facturacion"
  }
 ]
}